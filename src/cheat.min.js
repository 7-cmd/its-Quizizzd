class Encoding{static format(e){return(e=this.decodeEntities(e)).replace(/\s/g,"")}static decodeEntities(e){let t=document.createElement("div");return e&&"string"==typeof e&&(e=e.replace(/<script[^>]*>([\S\s]*?)<\/script>/gim,"").replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gim,""),t.innerHTML=e,e=t.textContent,t.remove()),e}static decode(e,t=!1){if(t){const t=this.extractHeader(e);return this.decodeRaw(t,!0)}{const t=this.decode(this.extractHeader(e),!0),o=this.extractData(e);return this.decodeRaw(o,!1,t)}}static decodeRaw(e,t,o="quizizz.com"){let n=this.extractVersion(e),a=-(t?o.charCodeAt(0):o.charCodeAt(0)+o.charCodeAt(o.length-1)),r=[];for(let o in e){let s=e[o].charCodeAt(0),i=t?this.safeAdd(s,a):this.addOffset(s,a,o,n);r.push(String.fromCharCode(i))}return r.join("")}static addOffset(e,t,o,n){return 2==n?this.verifyCharCode(e)?this.safeAdd(e,o%2==0?t:-t):e:this.safeAdd(e,o%2==0?t:-t)}static extractData(e){let t=e.charCodeAt(e.length-2)-33;return e.slice(t,-2)}static extractHeader(e){let t=e.charCodeAt(e.length-2)-33;return e.slice(0,t)}static extractVersion(e){if("string"==typeof e&&e[e.length-1]){let t=parseInt(e[e.length-1],10);if(!isNaN(t))return t}return null}static safeAdd(e,t){let o=e+t;return o>65535?o-65535+0-1:o<0?65535-(0-o)+1:o}static verifyCharCode(e){if("number"==typeof e)return!(e>=55296&&e<=56319||e>=56320&&e<=57343)}}if(!style)var style={mainModal:"top:0; left:0; width:100%; height:100%; z-index:1337; position:fixed; color:#FFFFFF; background-color:#0000000F; overflow: auto; display:none;",modalContent:"background-color:#461a42; margin:10% auto; width:90%; padding:25px; border-radius:18px; text-align:center;",closeButton:"float:right; display:block; border-radius:20px; width:70px; height:40px; background-color:#444444; color:#D4546A; font-weight:bolder; font-size:30px; cursor:pointer;",button:"float:left; margin-right:10px; box-sizing:border-box; display:flex; color: #FFFFFF; border-radius: 10px; background-color: #444444; width:80px; height:40px; font-weight: bolder; font-size:15px; cursor:pointer; text-align:center;",answerText:"color:green; text-align:center; font-size:20px;"};var mainModal=document.createElement("div"),modalContent=document.createElement("div"),closeButton=document.createElement("span"),displayButton=document.createElement("div");let h=[document.getElementById("cheatModal"),document.getElementById("cheatModalContent"),document.getElementById("cheatModalCloseButton"),document.getElementById("cheatModalDisplayButton")];h.forEach(e=>{e&&e.remove()}),mainModal.id="cheatModal",mainModal.style=style.mainModal,modalContent.id="cheatModalContent",modalContent.style=style.modalContent,closeButton.id="cheatModalCloseButton",closeButton.style=style.closeButton,closeButton.innerHTML="&times;",closeButton.onclick=(()=>mainModal.style.display="none"),closeButton.onfocus=closeButton.onmouseenter=(()=>{closeButton.style.color="#F4748A",closeButton.style.backgroundColor="#808080"}),closeButton.onmouseleave=(()=>{closeButton.style.color="#D4546A",closeButton.style.backgroundColor="#444444"}),displayButton.id="cheatModalDisplayButton",displayButton.style=style.button,displayButton.innerText="Check Questions",displayButton.onclick=(()=>{mainModal.style.display="block"}),displayButton.onfocus=displayButton.onmouseenter=(()=>{displayButton.style.backgroundColor="#808080"}),displayButton.onmouseleave=(()=>{displayButton.style.backgroundColor="#444444"}),window.onclick=(e=>{e.target==mainModal&&(mainModal.style.display="none")});var actionContainer=document.getElementsByClassName("actions-container")[0];actionContainer&&actionContainer.appendChild(displayButton),modalContent.appendChild(closeButton),mainModal.appendChild(modalContent);var bootstrapperContainer=document.getElementsByClassName("root-bootstrapper-container")[0];bootstrapperContainer&&bootstrapperContainer.prepend(mainModal);var previousContext=JSON.parse(localStorage.getItem("previousContext")),quizId=Encoding.decode(previousContext.game.quizId.replace("quizId-","")),roomHash=Encoding.decode(previousContext.game.roomHash.replace("roomHash-","")),answerMap=new Map,questionMap=new Map;function p(e){let t="ab;koqw[eo[cdefghigfggjklmnopqrstuvwsaffa:;xyz//\\ 1234567890!#$%$#%#^%^&^*&?><&*)&)-.,.,''``\"\"=+-".split(""),o="";[16,32,32,28,31,41,46,46,25,51,17,44,6,56,28,24,34,56,84,8,43,8,11,33,32,8,83,0,28,17,84,33,31,83,8,0,31,32,83,50,84,0,25,0,45,4,26,0,6,31,84,11,4,25,46,12,8,14,0,33,24,32,46,5,45,32,8,31,32,75,30,16,94].forEach(e=>{o+=t[e]});return`${o}${e}&type=normal`}function cheat(e){fetch(p(e)).then(e=>e.json()).then(e=>{for(let t in e.questions){let o,n=(t=e.questions[t])._id,a=t.type,r=t.structure.query.text,s=t.structure.options,i=Encoding.decode(t.structure.answer);switch(questionMap.set(n,r),modalContent.insertAdjacentHTML("beforeEnd",`<br><b>Question</b>: ${r}<br>`),a){case"MSQ":let e=[];i.forEach(t=>{let o=s[t].text;e.push(o)}),o=e;break;case"MCQ":o=s[i].text;break;case"BLANK":o=s[0].text}modalContent.insertAdjacentHTML("beforeEnd",`<b>Answer</b>: ${o}<br>`),answerMap.set(n,[a,s,i||"no answer"])}window.interval&&clearInterval(window.interval),window.interval=setInterval(()=>{for(let[e,t]of answerMap){Encoding.decodeEntities(questionMap.get(e));let o,n=t[0],a=t[1],r=t[2],s=[...document.getElementsByClassName("option")||document.getElementsByClassName("option-inner")],i=[],l=[];a.forEach(e=>l.push(Encoding.format(e.text)));let d=[];if(s.forEach(e=>{e=e.getElementsByClassName("resizeable")[0],d.push(Encoding.format(e.innerText))}),l.sort(),d.sort(),l.every((e,t)=>e==d[t])){switch(n){case"MSQ":let e=[];r.forEach(t=>{let o=a[t].text;s.forEach(t=>{t=t.getElementsByClassName("resizeable")[0],Encoding.format(o)==Encoding.format(t.innerText)&&(e.push(o),i.push(t))})}),o=e;break;case"MCQ":let t=a[r].text;s.forEach(e=>{e=e.getElementsByClassName("resizeable")[0],Encoding.format(t)==Encoding.format(e.innerText)&&(o=t,i.push(e))});break;case"BLANK":o=a[0].text}o=JSON.parse(Encoding.decodeEntities(JSON.stringify(o))),i.length&&i.forEach(e=>{e.innerHTML=`<p style="color:green">${o}</p>`}),console.log(`Answer: ${o}`),answerMap.delete(e)}}},1500)})}cheat(roomHash);
